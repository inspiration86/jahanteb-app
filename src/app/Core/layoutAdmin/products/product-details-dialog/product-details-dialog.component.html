<p-toast position="center"></p-toast>
<p-confirmDialog
  [style]="{ width: '50vw' }"
  [baseZIndex]="10000"
></p-confirmDialog>
<div style="direction: rtl; text-align: right">
  <div class="card">
    <p-tabView>
      <p-tabPanel header="محصول">
        <form class="w-100 mt-3">
          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col">
              <label for="title">عنوان</label>
              <input
                readonly="readonly"
                name="title"
                type="text"
                pInputText
                [(ngModel)]="product.title"
              />
            </div>
          </div>

          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col">
              <label class="d-block">دسته بندی اول</label>
              <input
                *ngIf="selectedCat != undefined"
                name="selectedCat"
                readonly="readonly"
                type="text"
                pInputText
                [(ngModel)]="selectedCat.title"
              />
              <input
              *ngIf="selectedCat == undefined"
              name="selectedCat"
              readonly="readonly"
              type="text"
              pInputText
              value="تعریف نشده"
            />
            </div>
            <div class="p-field p-col">
              <label class="d-block">دسته بندی دوم</label>
              <input
                *ngIf="selectedSub != undefined"
                name="selectedSub"
                readonly="readonly"
                type="text"
                pInputText
                [(ngModel)]="selectedSub.title"
              />
              <input
              *ngIf="selectedSub == undefined"
              name="selectedSub"
              readonly="readonly"
              type="text"
              pInputText
              value="تعریف نشده"
            />
            </div>
          </div>

          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col">
              <label class="d-block">تخفیف</label>
              <input
                *ngIf="selectedDiscount != undefined"
                name="selectedDiscount"
                readonly="readonly"
                type="text"
                pInputText
                [(ngModel)]="selectedDiscount.discountTitle"
              />
              <input
              *ngIf="selectedDiscount == undefined"
              name="selectedDiscount"
              readonly="readonly"
              type="text"
              pInputText
              value="تعریف نشده"
            />
            </div>
            <div class="p-field p-col">
              <label class="d-block">قیمت</label>
              <input
                readonly="readonly"
                type="text"
                name="price"
                pInputText
                pKeyFilter="int"
                [(ngModel)]="product.price"
              />
            </div>
          </div>

          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col text-right">
              <label class="d-block">جزئیات محصول</label>
              <textarea
                readonly="readonly"
                class="form-control"
                [(ngModel)]="product.detail"
                name="detail"
                rows="3"
              ></textarea>
            </div>
          </div>
          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col text-right">
              <label class="d-block"> راهنما محصول</label>
              <textarea
                readonly="readonly"
                class="form-control"
                [(ngModel)]="product.help"
                name="help"
                rows="3"
              ></textarea>
            </div>
          </div>

          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col">
              <p class="pt-3">لیست ویژگی ها</p>
              <p-table [value]="featureValues">
                <ng-template pTemplate="header">
                  <tr>
                    <th>ویژگی</th>
                    <th>مقدار</th>
                  </tr>
                </ng-template>
                <ng-template
                  pTemplate="body"
                  let-feature
                  let-rowIndex="rowIndex"
                >
                  <tr>
                    <td>{{ feature.feature }}</td>
                    <td>{{ feature.value }}</td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td colspan="2" class="text-right">
                      هیچ ویژگی ثبت نشده است.
                    </td>
                  </tr>
                </ng-template>
              </p-table>
            </div>
          </div>


          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col">
              <label class="d-block">کلمات کلیدی</label>
              <p-chips
                readonly="readonly"
                [(ngModel)]="keywords"
                name="keywords"
              ></p-chips>
            </div>
          </div>

          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col text-right">
              <label>تصویر کالا</label>
              <img
                [src]="product.image"
                class="img-fluid"
                [alt]="product.imageDescription"
              />
            </div>
          </div>
          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col text-right">
              <label>تصاویر گالری کالا</label>
              <p-galleria [value]="product.gallery">
                <ng-template pTemplate="item" let-item>
                  <img
                    [src]="item"
                    [alt]="product.imageDescription"
                    class="img-fluid"
                  />
                </ng-template>
              </p-galleria>
            </div>
          </div>


          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col">
              <label class="d-block">توضیحات تصویر (سئو)</label>
              <textarea
                readonly="readonly"
                class="form-control"
                [(ngModel)]="product.imageDescription"
                name="imageDescription"
                rows="3"
              ></textarea>
            </div>
          </div>
          <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col">
              <label class="d-block">توضیحات متا (سئو)</label>
              <textarea
                readonly="readonly"
                class="form-control"
                [(ngModel)]="product.metaDescription"
                name="metaDescription"
                rows="3"
              ></textarea>
            </div>
          </div>

          <span class="float-left p-buttonset">
            <button
            pButton
            type="button"
            label="حذف"
            (click)="deleteProduct(product._id)"
            class="p-button-danger"
            icon="pi pi-trash"
            iconPos="left"
          ></button>
          <button
            pButton
            type="button"
            (click)="return()"
            label="انصراف"
            class="p-button-info"
            icon="pi pi-home"
            iconPos="left"
          ></button>
        </span>

        </form>
      </p-tabPanel>
      <p-tabPanel header="دیدگاه ها">
        <p-table [value]="comments" class="bg-light-table mr-4">
          <ng-template pTemplate="header">
            <tr>
              <th>موبایل کاربر</th>
              <th>نام و نام خانوادگی کاربر</th>
              <th>دیدگاه</th>
              <th>وضعیت</th>
              <th>عملیات</th>
            </tr>
          </ng-template>

          <ng-template pTemplate="body" let-comment>
            <tr *ngIf="comment.productID == product._id">
              <td>{{ comment.User[0].mobile }}</td>
              <td>{{ comment.User[0].fullName }}</td>
              <td>{{ comment.commentText }}</td>
              <td>
                <button
                  *ngIf="comment.active"
                  pButton
                  type="button"
                  label="فعال"
                  class="p-button-rounded p-button-success"
                ></button>
                <button
                  *ngIf="!comment.active"
                  pButton
                  type="button"
                  label="غیرفعال"
                  class="p-button-rounded p-button-danger"
                ></button>
              </td>
              <td>
                <button
                  *ngIf="!comment.active"
                  pButton
                  pRipple
                  icon="pi pi-check"
                  (click)="activeComment(comment._id)"
                  class="p-button-outlined p-button-success ml-2"
                ></button>

                <button
                  *ngIf="comment.active"
                  pButton
                  pRipple
                  icon="pi pi-times"
                  (click)="deactiveComment(comment._id)"
                  class="p-button-outlined p-button-warning ml-2"
                ></button>

                <button
                  pButton
                  pRipple
                  icon="pi pi-trash"
                  (click)="deleteComment(comment._id)"
                  class="p-button-outlined p-button-danger"
                ></button>
              </td>
            </tr>
          </ng-template>

          <ng-template pTemplate="emptymessage">
            <tr>
              <td colspan="5">هیچ دیدگاهی ثبت نشده است.</td>
            </tr>
          </ng-template>
        </p-table>
      </p-tabPanel>
    </p-tabView>
  </div>
</div>
